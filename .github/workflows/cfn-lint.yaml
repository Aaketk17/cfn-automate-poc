name: check for cloudformation lint errors before deploy

on:
  pull_request:
    paths:
      - "**.yaml"
      - "**.yml"

jobs:
  cfn-lint:
    runs-on: [self-hosted, linux, ARM64, cfn-poc]
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Run cfn-lint
        run: |
          aws --version
          cfn-lint -t **/*.yaml
